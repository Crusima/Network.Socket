!function(t,e){"use strict";var n=e,a="https://en.tribalwars2.com:80",o={},r=null,s=function(){function t(t){if(t=t[0],0===t.indexOf("2::"))return void document.dispatchEvent(new CustomEvent("Heartbeat",{detail:{}}));switch(t=JSON.parse(t.substr(4)),t.args[0].type){case"Command/getAttackingFactor":return void document.dispatchEvent(new CustomEvent("ClickVillage",{detail:t.args[0].data}));case"Map/getVillageDetails":return void document.dispatchEvent(new CustomEvent("ShowVillageInfo",{detail:t.args[0].data}));case"Character/getProfile":return void document.dispatchEvent(new CustomEvent("ShowPlayerInfo",{detail:t.args[0].data}))}}function e(){}var s="0.1.21",i="CTW2.Plugin.Socket";return e.prototype.getVersion=function(){return s},e.prototype.getNamespace=function(){return i},e.prototype.run=function(){o=n.sockets[a].transport.websocket,r=o.send,o.send=function(){r.apply(this,[].slice.call(arguments)),t(arguments)}},e.prototype.stop=function(){o=n.sockets[a].transport.websocket,o.send=r},e}(),i=new s;newPluginName=i.getNamespace(),t.registerAndRun(i)}(_mainPlugin,io);
